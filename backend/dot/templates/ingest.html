{% include 'home.html' %}


{% block content %}
<div class="p-2">
<div class="table-responsive">
<table class="table table-striped table-hover caption-top table-responsive">
    <caption> Metadata : </caption>
  <thead>
    <tr>
      <th scope="col">Col Name</th>
      <th scope="col">Description</th>
      <th scope="col">Data Type</th>
      <th scope="col">Rule Type</th>
      <th scope="col">Attributes</th>
      <th scope="col">Threshold</th>
      <th scope="col">Defaults</th>
    </tr>
  </thead>
  <tbody>
    {% for i in table%}
      <tr>
        <td>{{ i.name }}</td>
        <td><input type="text" value={{ i.description }} /></td>
        <td>{{ i.field_type }}</td>
        <td>
            <select id="option-value" name="option" class="form-control form-control-sm bg-warning" aria-label="Default select example">
                <option value="1">Range Check</option>
                <option value="2">Null check</option>
                <option value="3">Set check</option>
                <option value="4">Regex check</option>
                <option value="5">Uniqueness Check</option>
                <option value="6">Statistic check</option>
            </select>
        </td>
        <td>
        <div id="input-1" class="form-group d-none">
        <input type="text" id="min-value" name="min-value" placeholder="min value">
        <input type="text" id="max-value" name="max-value" placeholder="max value">
        <div><input type="radio" id="ignore-null" name="ignore-null">Ignore Nulls</div>
        <div><input type="radio" id="strict-min" name="strict-min">strict min</div>
        <div><input type="radio" id="strict-max" name="strict-max">strict max</div>
      </div>
      <div id="input-2" class="form-group d-none">
        <input type="text" id="default-value-entry" name="default-value-entry" placeholder="default values for entry ">
      </div>
      <div id="input-3" class="form-group d-none">
        <div><input type="radio" id="ignore-null" name="ignore-null">Ignore Nulls</div>
        <input type="text" id="set-of-values" name="set-of-values" placeholder="Enter comma separated set of values Eg : {A-Z},{0-9}">
      </div>
      <div id="input-4" class="form-group d-none">
        <input type="text" id="regex-check" name="regex-check" placeholder="Pls provide a regular expression to check the values against. Eg: YYYY-MM-DD for timestamp">
      </div>
      <div id="input-5" class="form-group d-none">
        <div><input type="radio" id="ignore-null" name="ignore-null">Ignore Nulls</div>
      </div>
      <div id="input-6" class="form-group d-none">
        <input type="text" id="min-value" name="min-value" placeholder="min value">
        <input type="text" id="max-value" name="max-value" placeholder="max value">
        <div><input type="radio" id="strict-min" name="strict-min">strict min</div>
        <div><input type="radio" id="strict-max" name="strict-max">strict max</div>
      </div>
        
        </td>
        <td>100%</td>
        <td><input type="text" value={{ i.default_value_expression }} /></td>
      </tr>
    {% endfor %}
  </tbody>
</table><br>
</div>




<form class="justify-content-center" action="" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="mb-3 align-items-center">
        <label for="gcpProjectId" class="form-label">GCP Project ID :</label>
        <input type="email" class="form-control" id="gcpProjectId">
    </div>
    <div class="mb-3">
        <label for="bigQueryDatasetName" class="form-label ">BigQuery Dataset Name :</label>
        <input type="text" class="form-control" id="bigQueryDatasetName">
    </div>
    <div class="mb-3 align-items-center">
        <label for="targetTable" class="form-label ">Target Table :</label>
        <input type="text" class="form-control" id="targetTable">
    </div>
    <div class="text-center">
    <button type="submit" class="btn btn-md btn-primary">Ingest</button></div>
</form>
</div>
{% endblock %}

<script>
  let optionSelect = document.getElementById("option-value");
  const input1 = document.getElementById("input-1");
  const input2 = document.getElementById("input-2");
  const input3 = document.getElementById("input-3");
  const input4 = document.getElementById("input-4");
  const input5 = document.getElementById("input-5");
  const input6 = document.getElementById("input-6");
  optionSelect.addEventListener("change", function() {
    const value = optionSelect.value;
  
    if (value === "1") {
      input1.classList.remove("d-none");
      input2.classList.add("d-none");
      input3.classList.add("d-none");
      input4.classList.add("d-none");
      input5.classList.add("d-none");
      input6.classList.add("d-none");
      console.log(value)
    }
    if (value === "2") {
      input1.classList.add("d-none");
      input2.classList.remove("d-none");
      input3.classList.add("d-none");
      input4.classList.add("d-none");
      input5.classList.add("d-none");
      input6.classList.add("d-none");
      console.log(value)
    }
    if (value === "3") {
      input1.classList.add("d-none");
      input2.classList.add("d-none");
      input3.classList.remove("d-none");
      input4.classList.add("d-none");
      input5.classList.add("d-none");
      input6.classList.add("d-none");
      console.log(value)
    }
    if (value === "4") {
      input1.classList.add("d-none");
      input2.classList.add("d-none");
      input3.classList.add("d-none");
      input4.classList.remove("d-none");
      input5.classList.add("d-none");
      input6.classList.add("d-none");
      console.log(value)
    }
    if (value === "5") {
      input1.classList.add("d-none");
      input2.classList.add("d-none");
      input3.classList.add("d-none");
      input4.classList.add("d-none");
      input5.classList.remove("d-none");
      input6.classList.add("d-none");
      console.log(value)
    }
    if (value === "6") {
      input1.classList.add("d-none");
      input2.classList.add("d-none");
      input3.classList.add("d-none");
      input4.classList.add("d-none");
      input5.classList.add("d-none");
      input6.classList.remove("d-none");
      console.log(value)
    } 
  });
</script>